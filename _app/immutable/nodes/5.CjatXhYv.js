import{s as U,b as E,h as S,j as P,d as k,p as h,i as j,I as G,n as z,J as Q,o as V,e as W,K as B,t as A,f as T,l as F,k as M,L as X,v as g,M as N,N as Y,x as R,w as H,A as Z,m as $}from"../chunks/scheduler.Bx9lCxiB.js";import{S as J,i as K,a as q,c as ee,t as O,g as te,b as ne,d as le,m as ae,e as re}from"../chunks/index.D00NIsm6.js";import{t as ie}from"../chunks/transform.Kr_La7z8.js";import{_ as se}from"../chunks/preload-helper.D6kgxu3v.js";function oe(i){let e,t,n;return{c(){e=E("div"),this.h()},l(r){e=S(r,"DIV",{style:!0,class:!0}),P(e).forEach(k),this.h()},h(){h(e,"style",i[0]),h(e,"class","m-0")},m(r,u){j(r,e,u),t||(n=G(i[1].call(null,e)),t=!0)},p(r,[u]){u&1&&h(e,"style",r[0])},i:z,o:z,d(r){r&&k(e),t=!1,n()}}}function ce(i,e){return e.forEach(([t,n])=>i[t]=n),i}function ue(i,e,t){let{target:n=void 0}=e,{sketch:r=void 0}=e,{parentDivStyle:u="display: block;"}=e,{debug:f=!1}=e,p;const a=Q(),o={ref(){a("ref",n)},instance(){a("instance",p)}};function d(s){return t(2,n=s),{destroy(){t(2,n=void 0)}}}return V(async()=>{const s=await se(()=>import("../chunks/p5.min.rnJlKGKM.js").then(_=>_.p),[],import.meta.url),{default:v}=s,b=Object.entries(s).filter(([_,C])=>C instanceof Function&&_[0]!=="_"&&_!=="default");f&&console.log("available p5 native classes",b),p=new v(_=>(_=ce(_,b),f&&console.log("p5 instance",_),window._p5Instance=_,r(_)),n),o.ref(),o.instance()}),i.$$set=s=>{"target"in s&&t(2,n=s.target),"sketch"in s&&t(3,r=s.sketch),"parentDivStyle"in s&&t(0,u=s.parentDivStyle),"debug"in s&&t(4,f=s.debug)},[u,d,n,r,f]}class fe extends J{constructor(e){super(),K(this,e,ue,oe,U,{target:2,sketch:3,parentDivStyle:0,debug:4})}}function _e(i){let e,t,n,r,u,f,p,a,o,d,s,v,y,b,_,C,x,w,D;return _=new fe({props:{sketch:i[5]}}),{c(){e=E("article"),t=E("section"),n=E("label"),r=A(`Font Size
                `),u=E("input"),f=T(),p=A(i[3]),a=T(),o=E("label"),d=A(`Speed
                `),s=E("input"),v=T(),y=A(i[4]),b=T(),ne(_.$$.fragment),this.h()},l(l){e=S(l,"ARTICLE",{class:!0});var c=P(e);t=S(c,"SECTION",{class:!0});var m=P(t);n=S(m,"LABEL",{});var L=P(n);r=F(L,`Font Size
                `),u=S(L,"INPUT",{type:!0,min:!0,max:!0,step:!0}),f=M(L),p=F(L,i[3]),L.forEach(k),a=M(m),o=S(m,"LABEL",{});var I=P(o);d=F(I,`Speed
                `),s=S(I,"INPUT",{type:!0,min:!0,max:!0,step:!0}),v=M(I),y=F(I,i[4]),I.forEach(k),m.forEach(k),b=M(c),le(_.$$.fragment,c),c.forEach(k),this.h()},h(){h(u,"type","range"),h(u,"min","5"),h(u,"max","44"),h(u,"step","1"),h(s,"type","range"),h(s,"min","1"),h(s,"max","20"),h(s,"step","1"),h(t,"class","svelte-1xxl7xt"),h(e,"class","svelte-1xxl7xt"),X(()=>i[8].call(e))},m(l,c){j(l,e,c),g(e,t),g(t,n),g(n,r),g(n,u),N(u,i[3]),g(n,f),g(n,p),g(t,a),g(t,o),g(o,d),g(o,s),N(s,i[4]),g(o,v),g(o,y),g(e,b),ae(_,e,null),C=Y(e,i[8].bind(e)),x=!0,w||(D=[R(u,"change",i[6]),R(u,"input",i[6]),R(s,"change",i[7]),R(s,"input",i[7])],w=!0)},p(l,c){c&8&&N(u,l[3]),(!x||c&8)&&H(p,l[3]),c&16&&N(s,l[4]),(!x||c&16)&&H(y,l[4])},i(l){x||(O(_.$$.fragment,l),x=!0)},o(l){q(_.$$.fragment,l),x=!1},d(l){l&&k(e),re(_),C(),w=!1,Z(D)}}}function pe(i){let e,t="Loading...";return{c(){e=E("article"),e.textContent=t,this.h()},l(n){e=S(n,"ARTICLE",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-1qk6kpe"&&(e.textContent=t),this.h()},h(){h(e,"class","svelte-1xxl7xt")},m(n,r){j(n,e,r)},p:z,i:z,o:z,d(n){n&&k(e)}}}function de(i){let e,t,n,r;const u=[pe,_e],f=[];function p(a,o){return a[2].length==0?0:1}return e=p(i),t=f[e]=u[e](i),{c(){t.c(),n=W()},l(a){t.l(a),n=W()},m(a,o){f[e].m(a,o),j(a,n,o),r=!0},p(a,[o]){let d=e;e=p(a),e===d?f[e].p(a,o):(te(),q(f[d],1,1,()=>{f[d]=null}),ee(),t=f[e],t?t.p(a,o):(t=f[e]=u[e](a),t.c()),O(t,1),t.m(n.parentNode,n))},i(a){r||(O(t),r=!0)},o(a){q(t),r=!1},d(a){a&&k(n),f[e].d(a)}}}function me(i,e,t){let n,r,u=[],f=[];V(async l=>{t(2,u=await ie("opinions_out.tsv")),f=u.flatMap(c=>c.text.split(". ").map(m=>({text:m,id:c.id}))).flatMap(c=>c.text.length>200?c.text.split(",").map(m=>({text:m,id:c.id})):c).filter(c=>c.text&&c.text.length>2)});let p=0,a=0,o=12,d=6,s,v,y,b=[0,100,0],_;const C=l=>{l.preload=()=>{_=l.loadFont("terminal-grotesque.woff")},l.setup=()=>{l.createCanvas(n,r),l.colorMode(l.HSL),l.textFont(_)},l.draw=()=>{l.background(0,0,0,.05),l.frameRate(d),l.textSize(o),a=(a+1)%f.length;let c=r-10,m=n/4*l.sin(l.frameCount*.2)+n/4;p=(p+o+4)%r,p<=20&&(m=-m),y==f[a].id?(l.stroke(...b,.6),v>=5&&(l.strokeWeight(1),l.line(s,v,m,c-p,0))):(b=[a+10%360,20,50],p=p+o+14),l.fill(...b),l.stroke(0),l.strokeWeight(o/3),l.text(f[a].text,m+20,c-p),s=m,v=c-p,y=f[a].id}};function x(){o=B(this.value),t(3,o)}function w(){d=B(this.value),t(4,d)}function D(){n=this.clientWidth,r=this.clientHeight,t(0,n),t(1,r)}return[n,r,u,o,d,C,x,w,D]}class ke extends J{constructor(e){super(),K(this,e,me,de,U,{})}}export{ke as component};
