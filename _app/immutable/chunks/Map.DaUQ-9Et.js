import{s as Si,p as _i,n as yt,e as Ei,o as wi,r as yi,A as Mi,f as mi}from"./scheduler.cSAxCcgE.js";import{S as Pi,i as Ri,f as Ni,k as $i,l as pn,d as j,q as G,b as jn,C as Ai,D as Mn,E as mn,v as Mt,A as mt,z as Pt,y as Rt}from"./index.CmCBegWC.js";import{w as Li}from"./index.C5TFOMKQ.js";import"./transform.BALDiI-M.js";function qn(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}class un{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const o=e[r],u=t+o,a=Math.abs(t)<Math.abs(o)?t-(u-o):o-(u-t);a&&(e[i++]=a),t=u}return e[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let e=this._n,i,r,o,u=0;if(e>0){for(u=t[--e];e>0&&(i=u,r=t[--e],u=i+r,o=r-(u-i),!o););e>0&&(o<0&&t[e-1]<0||o>0&&t[e-1]>0)&&(r=o*2,i=u+r,r==i-u&&(u=i))}return u}}function*zi(n){for(const t of n)yield*t}function bt(n){return Array.from(zi(n))}var I=1e-6,Ii=1e-12,N=Math.PI,K=N/2,Nt=N/4,Q=N*2,tn=180/N,X=N/180,F=Math.abs,Ci=Math.atan,Nn=Math.atan2,T=Math.cos,D=Math.sin,Fi=Math.sign||function(n){return n>0?1:n<0?-1:0},fn=Math.sqrt;function qi(n){return n>1?0:n<-1?N:Math.acos(n)}function $n(n){return n>1?K:n<-1?-K:Math.asin(n)}function k(){}function Yn(n,t){n&&At.hasOwnProperty(n.type)&&At[n.type](n,t)}var $t={Feature:function(n,t){Yn(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,i=-1,r=e.length;++i<r;)Yn(e[i].geometry,t)}},At={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)n=e[i],t.point(n[0],n[1],n[2])},LineString:function(n,t){rt(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)rt(e[i],t,0)},Polygon:function(n,t){Lt(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)Lt(e[i],t)},GeometryCollection:function(n,t){for(var e=n.geometries,i=-1,r=e.length;++i<r;)Yn(e[i],t)}};function rt(n,t,e){var i=-1,r=n.length-e,o;for(t.lineStart();++i<r;)o=n[i],t.point(o[0],o[1],o[2]);t.lineEnd()}function Lt(n,t){var e=-1,i=n.length;for(t.polygonStart();++e<i;)rt(n[e],t,1);t.polygonEnd()}function cn(n,t){n&&$t.hasOwnProperty(n.type)?$t[n.type](n,t):Yn(n,t)}function ot(n){return[Nn(n[1],n[0]),$n(n[2])]}function gn(n){var t=n[0],e=n[1],i=T(e);return[i*T(t),i*D(t),D(e)]}function Tn(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function Zn(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function bn(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function Dn(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function ut(n){var t=fn(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function lt(n,t){function e(i,r){return i=n(i,r),t(i[0],i[1])}return n.invert&&t.invert&&(e.invert=function(i,r){return i=t.invert(i,r),i&&n.invert(i[0],i[1])}),e}function ft(n,t){return F(n)>N&&(n-=Math.round(n/Q)*Q),[n,t]}ft.invert=ft;function Ti(n,t,e){return(n%=Q)?t||e?lt(It(n),Ct(t,e)):It(n):t||e?Ct(t,e):ft}function zt(n){return function(t,e){return t+=n,F(t)>N&&(t-=Math.round(t/Q)*Q),[t,e]}}function It(n){var t=zt(n);return t.invert=zt(-n),t}function Ct(n,t){var e=T(n),i=D(n),r=T(t),o=D(t);function u(a,h){var c=T(h),l=T(a)*c,f=D(a)*c,s=D(h),p=s*e+l*i;return[Nn(f*r-p*o,l*e-s*i),$n(p*r+f*o)]}return u.invert=function(a,h){var c=T(h),l=T(a)*c,f=D(a)*c,s=D(h),p=s*r-f*o;return[Nn(f*r+s*o,l*e+p*i),$n(p*e-l*i)]},u}function Di(n,t,e,i,r,o){if(e){var u=T(t),a=D(t),h=i*e;r==null?(r=t+i*Q,o=t-h/2):(r=Ft(u,r),o=Ft(u,o),(i>0?r<o:r>o)&&(r+=i*Q));for(var c,l=r;i>0?l>o:l<o;l-=h)c=ot([u,-a*T(l),-a*D(l)]),n.point(c[0],c[1])}}function Ft(n,t){t=gn(t),t[0]-=n,ut(t);var e=qi(-t[1]);return((-t[2]<0?-e:e)+Q-I)%Q}function xt(){var n=[],t;return{point:function(e,i,r){t.push([e,i,r])},lineStart:function(){n.push(t=[])},lineEnd:k,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function On(n,t){return F(n[0]-t[0])<I&&F(n[1]-t[1])<I}function Bn(n,t,e,i){this.x=n,this.z=t,this.o=e,this.e=i,this.v=!1,this.n=this.p=null}function ni(n,t,e,i,r){var o=[],u=[],a,h;if(n.forEach(function(v){if(!((w=v.length-1)<=0)){var w,d=v[0],P=v[w],_;if(On(d,P)){if(!d[2]&&!P[2]){for(r.lineStart(),a=0;a<w;++a)r.point((d=v[a])[0],d[1]);r.lineEnd();return}P[0]+=2*I}o.push(_=new Bn(d,v,null,!0)),u.push(_.o=new Bn(d,null,_,!1)),o.push(_=new Bn(P,v,null,!1)),u.push(_.o=new Bn(P,null,_,!0))}}),!!o.length){for(u.sort(t),qt(o),qt(u),a=0,h=u.length;a<h;++a)u[a].e=e=!e;for(var c=o[0],l,f;;){for(var s=c,p=!0;s.v;)if((s=s.n)===c)return;l=s.z,r.lineStart();do{if(s.v=s.o.v=!0,s.e){if(p)for(a=0,h=l.length;a<h;++a)r.point((f=l[a])[0],f[1]);else i(s.x,s.n.x,1,r);s=s.n}else{if(p)for(l=s.p.z,a=l.length-1;a>=0;--a)r.point((f=l[a])[0],f[1]);else i(s.x,s.p.x,-1,r);s=s.p}s=s.o,l=s.z,p=!p}while(!s.v);r.lineEnd()}}}function qt(n){if(t=n.length){for(var t,e=0,i=n[0],r;++e<t;)i.n=r=n[e],r.p=i,i=r;i.n=r=n[0],r.p=i}}function xn(n){return F(n[0])<=N?n[0]:Fi(n[0])*((F(n[0])+N)%Q-N)}function Bi(n,t){var e=xn(t),i=t[1],r=D(i),o=[D(e),-T(e),0],u=0,a=0,h=new un;r===1?i=K+I:r===-1&&(i=-K-I);for(var c=0,l=n.length;c<l;++c)if(s=(f=n[c]).length)for(var f,s,p=f[s-1],v=xn(p),w=p[1]/2+Nt,d=D(w),P=T(w),_=0;_<s;++_,v=S,d=m,P=L,p=y){var y=f[_],S=xn(y),M=y[1]/2+Nt,m=D(M),L=T(M),$=S-v,A=$>=0?1:-1,C=A*$,E=C>N,O=d*m;if(h.add(Nn(O*A*D(C),P*L+O*T(C))),u+=E?$+A*Q:$,E^v>=e^S>=e){var q=Zn(gn(p),gn(y));ut(q);var z=Zn(o,q);ut(z);var g=(E^$>=0?-1:1)*$n(z[2]);(i>g||i===g&&(q[0]||q[1]))&&(a+=E^$>=0?1:-1)}}return(u<-I||u<I&&h<-Ii)^a&1}function ti(n,t,e,i){return function(r){var o=t(r),u=xt(),a=t(u),h=!1,c,l,f,s={point:p,lineStart:w,lineEnd:d,polygonStart:function(){s.point=P,s.lineStart=_,s.lineEnd=y,l=[],c=[]},polygonEnd:function(){s.point=p,s.lineStart=w,s.lineEnd=d,l=bt(l);var S=Bi(c,i);l.length?(h||(r.polygonStart(),h=!0),ni(l,Oi,S,e,r)):S&&(h||(r.polygonStart(),h=!0),r.lineStart(),e(null,null,1,r),r.lineEnd()),h&&(r.polygonEnd(),h=!1),l=c=null},sphere:function(){r.polygonStart(),r.lineStart(),e(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(S,M){n(S,M)&&r.point(S,M)}function v(S,M){o.point(S,M)}function w(){s.point=v,o.lineStart()}function d(){s.point=p,o.lineEnd()}function P(S,M){f.push([S,M]),a.point(S,M)}function _(){a.lineStart(),f=[]}function y(){P(f[0][0],f[0][1]),a.lineEnd();var S=a.clean(),M=u.result(),m,L=M.length,$,A,C;if(f.pop(),c.push(f),f=null,!!L){if(S&1){if(A=M[0],($=A.length-1)>0){for(h||(r.polygonStart(),h=!0),r.lineStart(),m=0;m<$;++m)r.point((C=A[m])[0],C[1]);r.lineEnd()}return}L>1&&S&2&&M.push(M.pop().concat(M.shift())),l.push(M.filter(Gi))}}return s}}function Gi(n){return n.length>1}function Oi(n,t){return((n=n.x)[0]<0?n[1]-K-I:K-n[1])-((t=t.x)[0]<0?t[1]-K-I:K-t[1])}const Tt=ti(function(){return!0},Hi,Yi,[-N,-K]);function Hi(n){var t=NaN,e=NaN,i=NaN,r;return{lineStart:function(){n.lineStart(),r=1},point:function(o,u){var a=o>0?N:-N,h=F(o-t);F(h-N)<I?(n.point(t,e=(e+u)/2>0?K:-K),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(a,e),n.point(o,e),r=0):i!==a&&h>=N&&(F(t-i)<I&&(t-=i*I),F(o-a)<I&&(o-=a*I),e=Xi(t,e,o,u),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(a,e),r=0),n.point(t=o,e=u),i=a},lineEnd:function(){n.lineEnd(),t=e=NaN},clean:function(){return 2-r}}}function Xi(n,t,e,i){var r,o,u=D(n-e);return F(u)>I?Ci((D(t)*(o=T(i))*D(e)-D(i)*(r=T(t))*D(n))/(r*o*u)):(t+i)/2}function Yi(n,t,e,i){var r;if(n==null)r=e*K,i.point(-N,r),i.point(0,r),i.point(N,r),i.point(N,0),i.point(N,-r),i.point(0,-r),i.point(-N,-r),i.point(-N,0),i.point(-N,r);else if(F(n[0]-t[0])>I){var o=n[0]<t[0]?N:-N;r=e*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(t[0],t[1])}function Zi(n){var t=T(n),e=2*X,i=t>0,r=F(t)>I;function o(l,f,s,p){Di(p,n,e,s,l,f)}function u(l,f){return T(l)*T(f)>t}function a(l){var f,s,p,v,w;return{lineStart:function(){v=p=!1,w=1},point:function(d,P){var _=[d,P],y,S=u(d,P),M=i?S?0:c(d,P):S?c(d+(d<0?N:-N),P):0;if(!f&&(v=p=S)&&l.lineStart(),S!==p&&(y=h(f,_),(!y||On(f,y)||On(_,y))&&(_[2]=1)),S!==p)w=0,S?(l.lineStart(),y=h(_,f),l.point(y[0],y[1])):(y=h(f,_),l.point(y[0],y[1],2),l.lineEnd()),f=y;else if(r&&f&&i^S){var m;!(M&s)&&(m=h(_,f,!0))&&(w=0,i?(l.lineStart(),l.point(m[0][0],m[0][1]),l.point(m[1][0],m[1][1]),l.lineEnd()):(l.point(m[1][0],m[1][1]),l.lineEnd(),l.lineStart(),l.point(m[0][0],m[0][1],3)))}S&&(!f||!On(f,_))&&l.point(_[0],_[1]),f=_,p=S,s=M},lineEnd:function(){p&&l.lineEnd(),f=null},clean:function(){return w|(v&&p)<<1}}}function h(l,f,s){var p=gn(l),v=gn(f),w=[1,0,0],d=Zn(p,v),P=Tn(d,d),_=d[0],y=P-_*_;if(!y)return!s&&l;var S=t*P/y,M=-t*_/y,m=Zn(w,d),L=Dn(w,S),$=Dn(d,M);bn(L,$);var A=m,C=Tn(L,A),E=Tn(A,A),O=C*C-E*(Tn(L,L)-1);if(!(O<0)){var q=fn(O),z=Dn(A,(-C-q)/E);if(bn(z,L),z=ot(z),!s)return z;var g=l[0],R=f[0],B=l[1],H=f[1],W;R<g&&(W=g,g=R,R=W);var dn=R-g,x=F(dn-N)<I,on=x||dn<I;if(!x&&H<B&&(W=B,B=H,H=W),on?x?B+H>0^z[1]<(F(z[0]-g)<I?B:H):B<=z[1]&&z[1]<=H:dn>N^(g<=z[0]&&z[0]<=R)){var nn=Dn(A,(-C+q)/E);return bn(nn,L),[z,ot(nn)]}}}function c(l,f){var s=i?n:N-n,p=0;return l<-s?p|=1:l>s&&(p|=2),f<-s?p|=4:f>s&&(p|=8),p}return ti(u,a,o,i?[0,-n]:[-N,n-N])}function Wi(n,t,e,i,r,o){var u=n[0],a=n[1],h=t[0],c=t[1],l=0,f=1,s=h-u,p=c-a,v;if(v=e-u,!(!s&&v>0)){if(v/=s,s<0){if(v<l)return;v<f&&(f=v)}else if(s>0){if(v>f)return;v>l&&(l=v)}if(v=r-u,!(!s&&v<0)){if(v/=s,s<0){if(v>f)return;v>l&&(l=v)}else if(s>0){if(v<l)return;v<f&&(f=v)}if(v=i-a,!(!p&&v>0)){if(v/=p,p<0){if(v<l)return;v<f&&(f=v)}else if(p>0){if(v>f)return;v>l&&(l=v)}if(v=o-a,!(!p&&v<0)){if(v/=p,p<0){if(v>f)return;v>l&&(l=v)}else if(p>0){if(v<l)return;v<f&&(f=v)}return l>0&&(n[0]=u+l*s,n[1]=a+l*p),f<1&&(t[0]=u+f*s,t[1]=a+f*p),!0}}}}}var Sn=1e9,Gn=-Sn;function Ji(n,t,e,i){function r(c,l){return n<=c&&c<=e&&t<=l&&l<=i}function o(c,l,f,s){var p=0,v=0;if(c==null||(p=u(c,f))!==(v=u(l,f))||h(c,l)<0^f>0)do s.point(p===0||p===3?n:e,p>1?i:t);while((p=(p+f+4)%4)!==v);else s.point(l[0],l[1])}function u(c,l){return F(c[0]-n)<I?l>0?0:3:F(c[0]-e)<I?l>0?2:1:F(c[1]-t)<I?l>0?1:0:l>0?3:2}function a(c,l){return h(c.x,l.x)}function h(c,l){var f=u(c,1),s=u(l,1);return f!==s?f-s:f===0?l[1]-c[1]:f===1?c[0]-l[0]:f===2?c[1]-l[1]:l[0]-c[0]}return function(c){var l=c,f=xt(),s,p,v,w,d,P,_,y,S,M,m,L={point:$,lineStart:O,lineEnd:q,polygonStart:C,polygonEnd:E};function $(g,R){r(g,R)&&l.point(g,R)}function A(){for(var g=0,R=0,B=p.length;R<B;++R)for(var H=p[R],W=1,dn=H.length,x=H[0],on,nn,Fn=x[0],an=x[1];W<dn;++W)on=Fn,nn=an,x=H[W],Fn=x[0],an=x[1],nn<=i?an>i&&(Fn-on)*(i-nn)>(an-nn)*(n-on)&&++g:an<=i&&(Fn-on)*(i-nn)<(an-nn)*(n-on)&&--g;return g}function C(){l=f,s=[],p=[],m=!0}function E(){var g=A(),R=m&&g,B=(s=bt(s)).length;(R||B)&&(c.polygonStart(),R&&(c.lineStart(),o(null,null,1,c),c.lineEnd()),B&&ni(s,a,g,o,c),c.polygonEnd()),l=c,s=p=v=null}function O(){L.point=z,p&&p.push(v=[]),M=!0,S=!1,_=y=NaN}function q(){s&&(z(w,d),P&&S&&f.rejoin(),s.push(f.result())),L.point=$,S&&l.lineEnd()}function z(g,R){var B=r(g,R);if(p&&v.push([g,R]),M)w=g,d=R,P=B,M=!1,B&&(l.lineStart(),l.point(g,R));else if(B&&S)l.point(g,R);else{var H=[_=Math.max(Gn,Math.min(Sn,_)),y=Math.max(Gn,Math.min(Sn,y))],W=[g=Math.max(Gn,Math.min(Sn,g)),R=Math.max(Gn,Math.min(Sn,R))];Wi(H,W,n,t,e,i)?(S||(l.lineStart(),l.point(H[0],H[1])),l.point(W[0],W[1]),B||l.lineEnd(),m=!1):B&&(l.lineStart(),l.point(g,R),m=!1)}_=g,y=R,S=B}return L}}const at=n=>n;var nt=new un,ct=new un,ii,ei,st,pt,en={point:k,lineStart:k,lineEnd:k,polygonStart:function(){en.lineStart=Ki,en.lineEnd=Qi},polygonEnd:function(){en.lineStart=en.lineEnd=en.point=k,nt.add(F(ct)),ct=new un},result:function(){var n=nt/2;return nt=new un,n}};function Ki(){en.point=ki}function ki(n,t){en.point=ri,ii=st=n,ei=pt=t}function ri(n,t){ct.add(pt*n-st*t),st=n,pt=t}function Qi(){ri(ii,ei)}var vn=1/0,Wn=vn,An=-vn,Jn=An,Kn={point:Ui,lineStart:k,lineEnd:k,polygonStart:k,polygonEnd:k,result:function(){var n=[[vn,Wn],[An,Jn]];return An=Jn=-(Wn=vn=1/0),n}};function Ui(n,t){n<vn&&(vn=n),n>An&&(An=n),t<Wn&&(Wn=t),t>Jn&&(Jn=t)}var ht=0,gt=0,_n=0,kn=0,Qn=0,sn=0,vt=0,dt=0,En=0,oi,ui,U,V,J={point:ln,lineStart:Dt,lineEnd:Bt,polygonStart:function(){J.lineStart=bi,J.lineEnd=xi},polygonEnd:function(){J.point=ln,J.lineStart=Dt,J.lineEnd=Bt},result:function(){var n=En?[vt/En,dt/En]:sn?[kn/sn,Qn/sn]:_n?[ht/_n,gt/_n]:[NaN,NaN];return ht=gt=_n=kn=Qn=sn=vt=dt=En=0,n}};function ln(n,t){ht+=n,gt+=t,++_n}function Dt(){J.point=Vi}function Vi(n,t){J.point=ji,ln(U=n,V=t)}function ji(n,t){var e=n-U,i=t-V,r=fn(e*e+i*i);kn+=r*(U+n)/2,Qn+=r*(V+t)/2,sn+=r,ln(U=n,V=t)}function Bt(){J.point=ln}function bi(){J.point=ne}function xi(){li(oi,ui)}function ne(n,t){J.point=li,ln(oi=U=n,ui=V=t)}function li(n,t){var e=n-U,i=t-V,r=fn(e*e+i*i);kn+=r*(U+n)/2,Qn+=r*(V+t)/2,sn+=r,r=V*n-U*t,vt+=r*(U+n),dt+=r*(V+t),En+=r*3,ln(U=n,V=t)}function fi(n){this._context=n}fi.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._context.moveTo(n,t),this._point=1;break}case 1:{this._context.lineTo(n,t);break}default:{this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,Q);break}}},result:k};var St=new un,tt,ai,ci,wn,yn,Ln={point:k,lineStart:function(){Ln.point=te},lineEnd:function(){tt&&si(ai,ci),Ln.point=k},polygonStart:function(){tt=!0},polygonEnd:function(){tt=null},result:function(){var n=+St;return St=new un,n}};function te(n,t){Ln.point=si,ai=wn=n,ci=yn=t}function si(n,t){wn-=n,yn-=t,St.add(fn(wn*wn+yn*yn)),wn=n,yn=t}let Gt,Un,Ot,Ht;class Xt{constructor(t){this._append=t==null?pi:ie(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,e){switch(this._point){case 0:{this._append`M${t},${e}`,this._point=1;break}case 1:{this._append`L${t},${e}`;break}default:{if(this._append`M${t},${e}`,this._radius!==Ot||this._append!==Un){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,Ot=i,Un=this._append,Ht=this._,this._=r}this._+=Ht;break}}}result(){const t=this._;return this._="",t.length?t:null}}function pi(n){let t=1;this._+=n[0];for(const e=n.length;t<e;++t)this._+=arguments[t]+n[t]}function ie(n){const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);if(t>15)return pi;if(t!==Gt){const e=10**t;Gt=t,Un=function(r){let o=1;this._+=r[0];for(const u=r.length;o<u;++o)this._+=Math.round(arguments[o]*e)/e+r[o]}}return Un}function ee(n,t){let e=3,i=4.5,r,o;function u(a){return a&&(typeof i=="function"&&o.pointRadius(+i.apply(this,arguments)),cn(a,r(o))),o.result()}return u.area=function(a){return cn(a,r(en)),en.result()},u.measure=function(a){return cn(a,r(Ln)),Ln.result()},u.bounds=function(a){return cn(a,r(Kn)),Kn.result()},u.centroid=function(a){return cn(a,r(J)),J.result()},u.projection=function(a){return arguments.length?(r=a==null?(n=null,at):(n=a).stream,u):n},u.context=function(a){return arguments.length?(o=a==null?(t=null,new Xt(e)):new fi(t=a),typeof i!="function"&&o.pointRadius(i),u):t},u.pointRadius=function(a){return arguments.length?(i=typeof a=="function"?a:(o.pointRadius(+a),+a),u):i},u.digits=function(a){if(!arguments.length)return e;if(a==null)e=null;else{const h=Math.floor(a);if(!(h>=0))throw new RangeError(`invalid digits: ${a}`);e=h}return t===null&&(o=new Xt(e)),u},u.projection(n).digits(e).context(t)}function Et(n){return function(t){var e=new _t;for(var i in n)e[i]=n[i];return e.stream=t,e}}function _t(){}_t.prototype={constructor:_t,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function wt(n,t,e){var i=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),i!=null&&n.clipExtent(null),cn(e,n.stream(Kn)),t(Kn.result()),i!=null&&n.clipExtent(i),n}function hi(n,t,e){return wt(n,function(i){var r=t[1][0]-t[0][0],o=t[1][1]-t[0][1],u=Math.min(r/(i[1][0]-i[0][0]),o/(i[1][1]-i[0][1])),a=+t[0][0]+(r-u*(i[1][0]+i[0][0]))/2,h=+t[0][1]+(o-u*(i[1][1]+i[0][1]))/2;n.scale(150*u).translate([a,h])},e)}function re(n,t,e){return hi(n,[[0,0],t],e)}function oe(n,t,e){return wt(n,function(i){var r=+t,o=r/(i[1][0]-i[0][0]),u=(r-o*(i[1][0]+i[0][0]))/2,a=-o*i[0][1];n.scale(150*o).translate([u,a])},e)}function ue(n,t,e){return wt(n,function(i){var r=+t,o=r/(i[1][1]-i[0][1]),u=-o*i[0][0],a=(r-o*(i[1][1]+i[0][1]))/2;n.scale(150*o).translate([u,a])},e)}var Yt=16,le=T(30*X);function Zt(n,t){return+t?ae(n,t):fe(n)}function fe(n){return Et({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}})}function ae(n,t){function e(i,r,o,u,a,h,c,l,f,s,p,v,w,d){var P=c-i,_=l-r,y=P*P+_*_;if(y>4*t&&w--){var S=u+s,M=a+p,m=h+v,L=fn(S*S+M*M+m*m),$=$n(m/=L),A=F(F(m)-1)<I||F(o-f)<I?(o+f)/2:Nn(M,S),C=n(A,$),E=C[0],O=C[1],q=E-i,z=O-r,g=_*q-P*z;(g*g/y>t||F((P*q+_*z)/y-.5)>.3||u*s+a*p+h*v<le)&&(e(i,r,o,u,a,h,E,O,A,S/=L,M/=L,m,w,d),d.point(E,O),e(E,O,A,S,M,m,c,l,f,s,p,v,w,d))}}return function(i){var r,o,u,a,h,c,l,f,s,p,v,w,d={point:P,lineStart:_,lineEnd:S,polygonStart:function(){i.polygonStart(),d.lineStart=M},polygonEnd:function(){i.polygonEnd(),d.lineStart=_}};function P($,A){$=n($,A),i.point($[0],$[1])}function _(){f=NaN,d.point=y,i.lineStart()}function y($,A){var C=gn([$,A]),E=n($,A);e(f,s,l,p,v,w,f=E[0],s=E[1],l=$,p=C[0],v=C[1],w=C[2],Yt,i),i.point(f,s)}function S(){d.point=P,i.lineEnd()}function M(){_(),d.point=m,d.lineEnd=L}function m($,A){y(r=$,A),o=f,u=s,a=p,h=v,c=w,d.point=y}function L(){e(f,s,l,p,v,w,o,u,r,a,h,c,Yt,i),d.lineEnd=S,S()}return d}}var ce=Et({point:function(n,t){this.stream.point(n*X,t*X)}});function se(n){return Et({point:function(t,e){var i=n(t,e);return this.stream.point(i[0],i[1])}})}function pe(n,t,e,i,r){function o(u,a){return u*=i,a*=r,[t+n*u,e-n*a]}return o.invert=function(u,a){return[(u-t)/n*i,(e-a)/n*r]},o}function Wt(n,t,e,i,r,o){if(!o)return pe(n,t,e,i,r);var u=T(o),a=D(o),h=u*n,c=a*n,l=u/n,f=a/n,s=(a*e-u*t)/n,p=(a*t+u*e)/n;function v(w,d){return w*=i,d*=r,[h*w-c*d+t,e-c*w-h*d]}return v.invert=function(w,d){return[i*(l*w-f*d+s),r*(p-f*w-l*d)]},v}function he(n){return ge(function(){return n})()}function ge(n){var t,e=150,i=480,r=250,o=0,u=0,a=0,h=0,c=0,l,f=0,s=1,p=1,v=null,w=Tt,d=null,P,_,y,S=at,M=.5,m,L,$,A,C;function E(g){return $(g[0]*X,g[1]*X)}function O(g){return g=$.invert(g[0],g[1]),g&&[g[0]*tn,g[1]*tn]}E.stream=function(g){return A&&C===g?A:A=ce(se(l)(w(m(S(C=g)))))},E.preclip=function(g){return arguments.length?(w=g,v=void 0,z()):w},E.postclip=function(g){return arguments.length?(S=g,d=P=_=y=null,z()):S},E.clipAngle=function(g){return arguments.length?(w=+g?Zi(v=g*X):(v=null,Tt),z()):v*tn},E.clipExtent=function(g){return arguments.length?(S=g==null?(d=P=_=y=null,at):Ji(d=+g[0][0],P=+g[0][1],_=+g[1][0],y=+g[1][1]),z()):d==null?null:[[d,P],[_,y]]},E.scale=function(g){return arguments.length?(e=+g,q()):e},E.translate=function(g){return arguments.length?(i=+g[0],r=+g[1],q()):[i,r]},E.center=function(g){return arguments.length?(o=g[0]%360*X,u=g[1]%360*X,q()):[o*tn,u*tn]},E.rotate=function(g){return arguments.length?(a=g[0]%360*X,h=g[1]%360*X,c=g.length>2?g[2]%360*X:0,q()):[a*tn,h*tn,c*tn]},E.angle=function(g){return arguments.length?(f=g%360*X,q()):f*tn},E.reflectX=function(g){return arguments.length?(s=g?-1:1,q()):s<0},E.reflectY=function(g){return arguments.length?(p=g?-1:1,q()):p<0},E.precision=function(g){return arguments.length?(m=Zt(L,M=g*g),z()):fn(M)},E.fitExtent=function(g,R){return hi(E,g,R)},E.fitSize=function(g,R){return re(E,g,R)},E.fitWidth=function(g,R){return oe(E,g,R)},E.fitHeight=function(g,R){return ue(E,g,R)};function q(){var g=Wt(e,0,0,s,p,f).apply(null,t(o,u)),R=Wt(e,i-g[0],r-g[1],s,p,f);return l=Ti(a,h,c),L=lt(t,R),$=lt(l,L),m=Zt(L,M),z()}function z(){return A=C=null,E}return function(){return t=n.apply(this,arguments),E.invert=t.invert&&O,q()}}var zn=Math.abs,hn=Math.atan,gi=Math.atan2,Hn=Math.cos,rn=Math.exp,In=Math.log,ve=Math.pow,it=Math.sign||function(n){return n>0?1:n<0?-1:0},Pn=Math.sin,Cn=Math.tan,Xn=1e-6,Y=Math.PI,b=Y/2,de=Y/4,Vn=Z(2);function Se(n){return n>1?b:n<-1?-b:Math.asin(n)}function Z(n){return n>0?Math.sqrt(n):0}function _e(n){return n=rn(2*n),(n-1)/(n+1)}function vi(n){return(rn(n)-rn(-n))/2}function Ee(n){return(rn(n)+rn(-n))/2}function we(n){var t=n(b,0)[0]-n(-b,0)[0];function e(i,r){var o=i>0?-.5:.5,u=n(i+o*Y,r);return u[0]-=o*t,u}return n.invert&&(e.invert=function(i,r){var o=i>0?-.5:.5,u=n.invert(i+o*t,r),a=u[0]-o*Y;return a<-Y?a+=2*Y:a>Y&&(a-=2*Y),u[0]=a,u}),e}function ye(n,t,e){var i,r,o;return n?(i=et(n,e),t?(r=et(t,1-e),o=r[1]*r[1]+e*i[0]*i[0]*r[0]*r[0],[[i[0]*r[2]/o,i[1]*i[2]*r[0]*r[1]/o],[i[1]*r[1]/o,-i[0]*i[2]*r[0]*r[2]/o],[i[2]*r[1]*r[2]/o,-e*i[0]*i[1]*r[0]/o]]):[[i[0],0],[i[1],0],[i[2],0]]):(r=et(t,1-e),[[0,r[0]/r[1]],[1/r[1],0],[r[2]/r[1],0]])}function et(n,t){var e,i,r,o,u;if(t<Xn)return o=Pn(n),i=Hn(n),e=t*(n-o*i)/4,[o-e*i,i+e*o,1-t*o*o/2,n-e];if(t>=1-Xn)return e=(1-t)/4,i=Ee(n),o=_e(n),r=1/i,u=i*vi(n),[o+e*(u-n)/(i*i),r-e*o*r*(u-n),r+e*o*r*(u+n),2*hn(rn(n))-b+e*(u-n)/i];var a=[1,0,0,0,0,0,0,0,0],h=[Z(t),0,0,0,0,0,0,0,0],c=0;for(i=Z(1-t),u=1;zn(h[c]/a[c])>Xn&&c<8;)e=a[c++],h[c]=(e-i)/2,a[c]=(e+i)/2,i=Z(e*i),u*=2;r=u*a[c]*n;do o=h[c]*Pn(i=r)/a[c],r=(Se(o)+r)/2;while(--c);return[Pn(r),o=Hn(r),o/Hn(r-i),r]}function Me(n,t,e){var i=zn(n),r=zn(t),o=vi(r);if(i){var u=1/Pn(i),a=1/(Cn(i)*Cn(i)),h=-(a+e*(o*o*u*u)-1+e),c=(e-1)*a,l=(-h+Z(h*h-4*c))/2;return[Rn(hn(1/Z(l)),e)*it(n),Rn(hn(Z((l/a-1)/e)),1-e)*it(t)]}return[0,Rn(hn(o),1-e)*it(t)]}function Rn(n,t){if(!t)return n;if(t===1)return In(Cn(n/2+de));for(var e=1,i=Z(1-t),r=Z(t),o=0;zn(r)>Xn;o++){if(n%Y){var u=hn(i*Cn(n)/e);u<0&&(u+=Y),n+=u+~~(n/Y)*Y}else n+=n;r=(e+i)/2,i=Z(e*i),r=((e=r)-i)/2}return n/(ve(2,o)*e)}function di(n,t){var e=(Vn-1)/(Vn+1),i=Z(1-e*e),r=Rn(b,i*i),o=-1,u=In(Cn(Y/4+zn(t)/2)),a=rn(o*u)/Z(e),h=me(a*Hn(o*n),a*Pn(o*n)),c=Me(h[0],h[1],i*i);return[-c[1],(t>=0?1:-1)*(.5*r-c[0])]}function me(n,t){var e=n*n,i=t+1,r=1-e-t*t;return[.5*((n>=0?b:-b)-gi(r,2*n)),-.25*In(r*r+4*e)+.5*In(i*i+e)]}function Pe(n,t){var e=t[0]*t[0]+t[1]*t[1];return[(n[0]*t[0]+n[1]*t[1])/e,(n[1]*t[0]-n[0]*t[1])/e]}di.invert=function(n,t){var e=(Vn-1)/(Vn+1),i=Z(1-e*e),r=Rn(b,i*i),o=-1,u=ye(.5*r-t,-n,i*i),a=Pe(u[0],u[1]),h=gi(a[1],a[0])/o;return[h,2*hn(rn(.5/o*In(e*a[0]*a[0]+e*a[1]*a[1])))-b]};function Re(){return he(we(di)).scale(151.496)}function Ne(n){return n}function $e(n){if(n==null)return Ne;var t,e,i=n.scale[0],r=n.scale[1],o=n.translate[0],u=n.translate[1];return function(a,h){h||(t=e=0);var c=2,l=a.length,f=new Array(l);for(f[0]=(t+=a[0])*i+o,f[1]=(e+=a[1])*r+u;c<l;)f[c]=a[c],++c;return f}}function Ae(n,t){for(var e,i=n.length,r=i-t;r<--i;)e=n[r],n[r++]=n[i],n[i]=e}function Le(n,t){return t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(e){return Jt(n,e)})}:Jt(n,t)}function Jt(n,t){var e=t.id,i=t.bbox,r=t.properties==null?{}:t.properties,o=ze(n,t);return e==null&&i==null?{type:"Feature",properties:r,geometry:o}:i==null?{type:"Feature",id:e,properties:r,geometry:o}:{type:"Feature",id:e,bbox:i,properties:r,geometry:o}}function ze(n,t){var e=$e(n.transform),i=n.arcs;function r(l,f){f.length&&f.pop();for(var s=i[l<0?~l:l],p=0,v=s.length;p<v;++p)f.push(e(s[p],p));l<0&&Ae(f,v)}function o(l){return e(l)}function u(l){for(var f=[],s=0,p=l.length;s<p;++s)r(l[s],f);return f.length<2&&f.push(f[0]),f}function a(l){for(var f=u(l);f.length<4;)f.push(f[0]);return f}function h(l){return l.map(a)}function c(l){var f=l.type,s;switch(f){case"GeometryCollection":return{type:f,geometries:l.geometries.map(c)};case"Point":s=o(l.coordinates);break;case"MultiPoint":s=l.coordinates.map(o);break;case"LineString":s=u(l.arcs);break;case"MultiLineString":s=l.arcs.map(u);break;case"Polygon":s=h(l.arcs);break;case"MultiPolygon":s=l.arcs.map(h);break;default:return null}return{type:f,coordinates:s}}return c(t)}let Kt=Li("undefined");function kt(n,t,e){const i=n.slice();return i[10]=t[e],i}function Qt(n,t,e){const i=n.slice();return i[13]=t[e],i}function Ut(n){let t,e,i,r,o=qn(n[4]),u=[];for(let c=0;c<o.length;c+=1)u[c]=Vt(Qt(n,o,c));let a=qn(n[0]),h=[];for(let c=0;c<a.length;c+=1)h[c]=jt(kt(n,a,c));return{c(){t=Mn("svg"),e=Mn("g");for(let c=0;c<u.length;c+=1)u[c].c();i=Mn("g");for(let c=0;c<h.length;c+=1)h[c].c();this.h()},l(c){t=mn(c,"svg",{viewBox:!0});var l=pn(t);e=mn(l,"g",{fill:!0});var f=pn(e);for(let p=0;p<u.length;p+=1)u[p].l(f);f.forEach(j),i=mn(l,"g",{fill:!0});var s=pn(i);for(let p=0;p<h.length;p+=1)h[p].l(s);s.forEach(j),l.forEach(j),this.h()},h(){G(e,"fill","#1A1A1A"),G(i,"fill","var(--color-1)"),G(t,"viewBox",r="0 0 "+n[1]+" "+n[2])},m(c,l){jn(c,t,l),Mt(t,e);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(e,null);Mt(t,i);for(let f=0;f<h.length;f+=1)h[f]&&h[f].m(i,null)},p(c,l){if(l&48){o=qn(c[4]);let f;for(f=0;f<o.length;f+=1){const s=Qt(c,o,f);u[f]?u[f].p(s,l):(u[f]=Vt(s),u[f].c(),u[f].m(e,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=o.length}if(l&73){a=qn(c[0]);let f;for(f=0;f<a.length;f+=1){const s=kt(c,a,f);h[f]?h[f].p(s,l):(h[f]=jt(s),h[f].c(),h[f].m(i,null))}for(;f<h.length;f+=1)h[f].d(1);h.length=a.length}l&6&&r!==(r="0 0 "+c[1]+" "+c[2])&&G(t,"viewBox",r)},d(c){c&&j(t),mt(u,c),mt(h,c)}}}function Vt(n){let t,e;return{c(){t=Mn("path"),this.h()},l(i){t=mn(i,"path",{d:!0,class:!0}),pn(t).forEach(j),this.h()},h(){G(t,"d",e=n[5](n[13])),G(t,"class","state")},m(i,r){jn(i,t,r)},p(i,r){r&48&&e!==(e=i[5](i[13]))&&G(t,"d",e)},d(i){i&&j(t)}}}function jt(n){let t,e,i,r;function o(){return n[8](n[10])}return{c(){t=Mn("circle"),this.h()},l(u){t=mn(u,"circle",{role:!0,tabindex:!0,r:!0,stroke:!0,transform:!0,class:!0}),pn(t).forEach(j),this.h()},h(){var u,a;G(t,"role","tab"),G(t,"tabindex","0"),G(t,"r","3"),G(t,"stroke","black"),G(t,"transform",e="translate("+n[3]([n[10].Longitude,n[10].Latitude])+")"),G(t,"class","svelte-1n23rrt"),Pt(t,"selected",n[6]==((u=n[10])==null?void 0:u.img)||n[6]==((a=n[10])==null?void 0:a.id))},m(u,a){jn(u,t,a),i||(r=[Rt(t,"mouseover",o),Rt(t,"focus",n[7])],i=!0)},p(u,a){var h,c;n=u,a&9&&e!==(e="translate("+n[3]([n[10].Longitude,n[10].Latitude])+")")&&G(t,"transform",e),a&65&&Pt(t,"selected",n[6]==((h=n[10])==null?void 0:h.img)||n[6]==((c=n[10])==null?void 0:c.id))},d(u){u&&j(t),i=!1,yi(r)}}}function Ie(n){let t,e,i=n[3]!=null&&Ut(n);return{c(){t=Ni("section"),i&&i.c(),this.h()},l(r){t=$i(r,"SECTION",{id:!0,bind:!0,class:!0});var o=pn(t);i&&i.l(o),o.forEach(j),this.h()},h(){G(t,"id","map"),G(t,"bind",""),G(t,"class","svelte-1n23rrt"),_i(()=>n[9].call(t))},m(r,o){jn(r,t,o),i&&i.m(t,null),e=Ai(t,n[9].bind(t))},p(r,[o]){r[3]!=null?i?i.p(r,o):(i=Ut(r),i.c(),i.m(t,null)):i&&(i.d(1),i=null)},i:yt,o:yt,d(r){r&&j(t),i&&i.d(),e()}}}function Ce(n,t,e){let i,r,o;Ei(n,Kt,p=>e(6,o=p));let{data:u}=t,a,h,c=[];wi(async()=>{const p=await fetch("https://gist.githubusercontent.com/sinanatra/91a7736f19e6636592703a459a8bfe75/raw/ca86b3ea72d66a68945624f3e933445c766aa28f/pixel25.json").then(v=>v.json());e(4,c=Le(p,p.objects.pixel25).features)});function l(p){Mi.call(this,n,p)}const f=p=>{mi(Kt,o=(p==null?void 0:p.img)||(p==null?void 0:p.id),o)};function s(){a=this.clientWidth,h=this.clientHeight,e(1,a),e(2,h)}return n.$$set=p=>{"data"in p&&e(0,u=p.data)},n.$$.update=()=>{n.$$.dirty&6&&e(3,i=Re().translate([a/2,h/2]).angle(-90).rotate([18,-90])),n.$$.dirty&8&&e(5,r=ee().projection(i))},[u,a,h,i,c,r,o,l,f,s]}let Be=class extends Pi{constructor(t){super(),Ri(this,t,Ce,Ie,Si,{data:0})}};export{Be as M,qn as e,Kt as s};
